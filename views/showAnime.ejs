<!-- show.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="./stylesheets/show.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <title>Show Data</title>
</head>
<body class="bg-black">

    <header class="text-white p-1 lg:p-2 gap-1">
        <div class="flex justify-center items-center gap-1 md:gap-3 lg:gap-4">
            <div class="menu">
                <input type="checkbox" class="openSidebarMenu" id="openSidebarMenu">
                <label for="openSidebarMenu" class="sidebarIconToggle">
                  <div class="spinner diagonal part-1 h-[2px] md:h-[3px] lg:h-[4px]"></div>
                  <div class="spinner horizontal h-[2px] md:h-[3px] lg:h-[4px]"></div>
                  <div class="spinner diagonal part-2 h-[2px] md:h-[3px] lg:h-[4px]"></div>
                </label>
                <div id="sidebarMenu">
                  <ul class="sidebarMenuInner bg-black h-screen">
                    
                    <li><a href="/">Home </a></li>
                    <li><a href="/movie">Movies </a></li>
                    <li><a href="/tvShow">Web Series</a></li>
                    <li><a href="/anime">Anime</a></li>
                    <li><a href="/list">My List</a></li>
                  </ul>
                </div>
    
                </div>
                <h1 class="text-lg md:text-2xl lg:text-3xl font-extrabold absolute left-10 top-[6px] md:top-1" ><span class="text-rose-700">Jam</span>Watch</h1>
        </div>
 
        <!-- <div class="flex justify-center items-center gap-1 md:gap-3 lg:gap-5">
             
            <div>
                <form class="search-container" action="">
                     <input id="search-box" type="text" class="search-box font-semibold" name="q" />
                     <label for="search-box"><i class='bx bx-search-alt text-3xl font-bo search-icon' ></i></label>
                     <input type="submit" id="search-submit" />
                   </form>
            </div>
 
             <button id="showGenre" class="a top-5 right-6 px-1 md:px-3 lg:px-5 py-1 bg-rose-700 text-white font-bold rounded text-sm md:text-base lg:text-lg" onclick="scrollDown()">Recommend</button>
        </div> -->
     </header>


    
    <div class="px-3 lg:px-10 mt-20 flex gap-5 text-white">
        <div class="h-[50vh] md:h-[80vh] lg:h-[80vh] w-[149vh] md:w-[70vh] lg:w-[70vh]">
            <img src="<%= info.pictureUrl %> "alt="Picture" class="max-w-44 md:max-w-72 lg:max-w-96 h-full">
        </div>
        <div>
            <h1 class="mb-3 md:mb-5 lg:mb-8 text-base md:text-4xl lg:text-6xl font-extrabold leading-loose" style="line-height: 1.2;"><%= info.title %>  </h1>
            <h2 class="mb-1 lg:mb-2 text-xs md:text-sm lg:text-lg font-lg"><span class="font-semibold text-rose-700">Type :</span> Movie</h2>
            <p class="mb-1 tracking-tight lg:mb-2 text-[80%] md:text-sm lg:text-lg font-lg"><span class="font-semibold text-rose-700">Plot Summary :</span> <%= info.plot %></p>
            <h2 class="mb-1 lg:mb-2 text-[80%] md:text-sm lg:text-lg font-lg"><span class="font-semibold text-rose-700">Released :</span> <%= info.year %></h2>
            <h2 class="mb-3 lg:mb-6 text-[80%] md:text-sm lg:text-lg font-lg"><span class="font-semibold text-rose-700">Timeline : </span><%= info.time %></h2>
            <a href="#" class="post-link text-center border-2 border-rose-700 bg-inherit px-1 md:px-3 lg:px-5 py-1 rounded-3xl text-[80%] md:text-sm lg:text-lg font-semibold text-rose-700 hover:bg-rose-700 hover:text-white ease-in-out duration-75"
            data-title="<%= info.title %>" data-picture="<%= info.pictureUrl %>">Add to List</a>
        </div>
    </div>


    <div class="mt-16 w-screen">
        <div class="owl-carousel" id="owl">
            <% tops.forEach(function(ele){ %>
                <div class="ml-1 p-1 text-white mb-4">
                    <a href="#" class="post-link" data-title="<%= ele.title %>" data-picture="<%= ele.imageLink %>" data-year="<%=ele.year %>" data-plot="<%=ele.plot %>" data-time="<%=ele.time %>">
                        <img src="<%= ele.imageLink %>" alt="" class="md:h-[27rem] lg:h-[33rem] w-[100%]">
                        <h2 class="mt-2 font-bold text-xl text-center"><%= ele.title %></h2>
                    </a>
                 </div>
            <% }) %>
          </div>
    </div>

    <script>

document.addEventListener("DOMContentLoaded", function() {
   
    const postLinks = document.querySelectorAll(".post-link");

    postLinks.forEach(function(link) {
        link.addEventListener("click", function(event) {
            event.preventDefault(); // Prevent the default action (navigation)

            const title = link.getAttribute("data-title");
            const pictureUrl = link.getAttribute("data-picture");

            // Prepare the data object to send in the POST request
            const data = {
                title: title,
                picture_url: pictureUrl
            };

            // Create a hidden form element
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '/add'; // Replace with your endpoint URL

            // Create a hidden input field for each data attribute
            Object.keys(data).forEach(function(key) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = key;
                input.value = data[key];
                form.appendChild(input);
            });

            // Append the form to the document body and submit it
            document.body.appendChild(form);
            form.submit();
       
        });
    });
});


    $(document).ready(function(){
    $('.owl-carousel').owlCarousel({ 
      nav: true,
      responsive:{
        0:{
          items:2
        },
        600:{
          items:3
        },
        1000:{
          items:4
        }
      }
    });
  });

    </script>
</body>
</html>
